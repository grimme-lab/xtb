# One has to mask old buggy implementation of BLAS/LAPACK from Apple Accelerate with fixed version.
# New implementation is available since MacOS 13.3, and has suffix $NEWLAPACK for LP64 mode, ILP64 mode has syffix $NEWLAPACK$ILP64.
# Note, new implementation still has incompatible interface for cdotc, cdotu, zdotc, zdotu. Fortunately, xtb does not use them (yet).
# We apply these aliases for all targets. Better solution is to provide explicit interfaces in source code.
function(apply_framework_accelerate_aliases)
  add_link_options("-Wl,-alias,_dasum$NEWLAPACK,_dasum_")
  add_link_options("-Wl,-alias,_daxpy$NEWLAPACK,_daxpy_")
  add_link_options("-Wl,-alias,_dcopy$NEWLAPACK,_dcopy_")
  add_link_options("-Wl,-alias,_ddot$NEWLAPACK,_ddot_")
  add_link_options("-Wl,-alias,_dgemm$NEWLAPACK,_dgemm_")
  add_link_options("-Wl,-alias,_dgemv$NEWLAPACK,_dgemv_")
  add_link_options("-Wl,-alias,_dger$NEWLAPACK,_dger_")
  add_link_options("-Wl,-alias,_dgetrf$NEWLAPACK,_dgetrf_")
  add_link_options("-Wl,-alias,_dgetri$NEWLAPACK,_dgetri_")
  add_link_options("-Wl,-alias,_dgetrs$NEWLAPACK,_dgetrs_")
  add_link_options("-Wl,-alias,_dnrm2$NEWLAPACK,_dnrm2_")
  add_link_options("-Wl,-alias,_dpotrf$NEWLAPACK,_dpotrf_")
  add_link_options("-Wl,-alias,_dpotrs$NEWLAPACK,_dpotrs_")
  add_link_options("-Wl,-alias,_dpptrf$NEWLAPACK,_dpptrf_")
  add_link_options("-Wl,-alias,_dpptrs$NEWLAPACK,_dpptrs_")
  add_link_options("-Wl,-alias,_drot$NEWLAPACK,_drot_")
  add_link_options("-Wl,-alias,_dscal$NEWLAPACK,_dscal_")
  add_link_options("-Wl,-alias,_dspev$NEWLAPACK,_dspev_")
  add_link_options("-Wl,-alias,_dspevd$NEWLAPACK,_dspevd_")
  add_link_options("-Wl,-alias,_dspmv$NEWLAPACK,_dspmv_")
  add_link_options("-Wl,-alias,_dspr2$NEWLAPACK,_dspr2_")
  add_link_options("-Wl,-alias,_dspr$NEWLAPACK,_dspr_")
  add_link_options("-Wl,-alias,_dsptrf$NEWLAPACK,_dsptrf_")
  add_link_options("-Wl,-alias,_dsptrs$NEWLAPACK,_dsptrs_")
  add_link_options("-Wl,-alias,_dswap$NEWLAPACK,_dswap_")
  add_link_options("-Wl,-alias,_dsyev$NEWLAPACK,_dsyev_")
  add_link_options("-Wl,-alias,_dsyevd$NEWLAPACK,_dsyevd_")
  add_link_options("-Wl,-alias,_dsygst$NEWLAPACK,_dsygst_")
  add_link_options("-Wl,-alias,_dsygvd$NEWLAPACK,_dsygvd_")
  add_link_options("-Wl,-alias,_dsymm$NEWLAPACK,_dsymm_")
  add_link_options("-Wl,-alias,_dsymv$NEWLAPACK,_dsymv_")
  add_link_options("-Wl,-alias,_dsyr2$NEWLAPACK,_dsyr2_")
  add_link_options("-Wl,-alias,_dsyr2k$NEWLAPACK,_dsyr2k_")
  add_link_options("-Wl,-alias,_dsyr$NEWLAPACK,_dsyr_")
  add_link_options("-Wl,-alias,_dsyrk$NEWLAPACK,_dsyrk_")
  add_link_options("-Wl,-alias,_dsysv$NEWLAPACK,_dsysv_")
  add_link_options("-Wl,-alias,_dsytrf$NEWLAPACK,_dsytrf_")
  add_link_options("-Wl,-alias,_dsytri$NEWLAPACK,_dsytri_")
  add_link_options("-Wl,-alias,_dsytrs$NEWLAPACK,_dsytrs_")
  add_link_options("-Wl,-alias,_dtrmm$NEWLAPACK,_dtrmm_")
  add_link_options("-Wl,-alias,_dtrsm$NEWLAPACK,_dtrsm_")
  add_link_options("-Wl,-alias,_idamax$NEWLAPACK,_idamax_")
  add_link_options("-Wl,-alias,_isamax$NEWLAPACK,_isamax_")
  add_link_options("-Wl,-alias,_sasum$NEWLAPACK,_sasum_")
  add_link_options("-Wl,-alias,_saxpy$NEWLAPACK,_saxpy_")
  add_link_options("-Wl,-alias,_scopy$NEWLAPACK,_scopy_")
  add_link_options("-Wl,-alias,_sdot$NEWLAPACK,_sdot_")
  add_link_options("-Wl,-alias,_sgemm$NEWLAPACK,_sgemm_")
  add_link_options("-Wl,-alias,_sgemv$NEWLAPACK,_sgemv_")
  add_link_options("-Wl,-alias,_sger$NEWLAPACK,_sger_")
  add_link_options("-Wl,-alias,_sgetrf$NEWLAPACK,_sgetrf_")
  add_link_options("-Wl,-alias,_sgetrs$NEWLAPACK,_sgetrs_")
  add_link_options("-Wl,-alias,_snrm2$NEWLAPACK,_snrm2_")
  add_link_options("-Wl,-alias,_spotrf$NEWLAPACK,_spotrf_")
  add_link_options("-Wl,-alias,_spotrs$NEWLAPACK,_spotrs_")
  add_link_options("-Wl,-alias,_spptrf$NEWLAPACK,_spptrf_")
  add_link_options("-Wl,-alias,_spptrs$NEWLAPACK,_spptrs_")
  add_link_options("-Wl,-alias,_srot$NEWLAPACK,_srot_")
  add_link_options("-Wl,-alias,_sscal$NEWLAPACK,_sscal_")
  add_link_options("-Wl,-alias,_sspevx$NEWLAPACK,_sspevx_")
  add_link_options("-Wl,-alias,_sspmv$NEWLAPACK,_sspmv_")
  add_link_options("-Wl,-alias,_sspr2$NEWLAPACK,_sspr2_")
  add_link_options("-Wl,-alias,_sspr$NEWLAPACK,_sspr_")
  add_link_options("-Wl,-alias,_ssptrf$NEWLAPACK,_ssptrf_")
  add_link_options("-Wl,-alias,_ssptrs$NEWLAPACK,_ssptrs_")
  add_link_options("-Wl,-alias,_sswap$NEWLAPACK,_sswap_")
  add_link_options("-Wl,-alias,_ssyev$NEWLAPACK,_ssyev_")
  add_link_options("-Wl,-alias,_ssyevd$NEWLAPACK,_ssyevd_")
  add_link_options("-Wl,-alias,_ssyevx$NEWLAPACK,_ssyevx_")
  add_link_options("-Wl,-alias,_ssygst$NEWLAPACK,_ssygst_")
  add_link_options("-Wl,-alias,_ssygvd$NEWLAPACK,_ssygvd_")
  add_link_options("-Wl,-alias,_ssymm$NEWLAPACK,_ssymm_")
  add_link_options("-Wl,-alias,_ssymv$NEWLAPACK,_ssymv_")
  add_link_options("-Wl,-alias,_ssyr2$NEWLAPACK,_ssyr2_")
  add_link_options("-Wl,-alias,_ssyr2k$NEWLAPACK,_ssyr2k_")
  add_link_options("-Wl,-alias,_ssyr$NEWLAPACK,_ssyr_")
  add_link_options("-Wl,-alias,_ssyrk$NEWLAPACK,_ssyrk_")
  add_link_options("-Wl,-alias,_ssytrf$NEWLAPACK,_ssytrf_")
  add_link_options("-Wl,-alias,_ssytri$NEWLAPACK,_ssytri_")
  add_link_options("-Wl,-alias,_ssytrs$NEWLAPACK,_ssytrs_")
  add_link_options("-Wl,-alias,_strmm$NEWLAPACK,_strmm_")
  add_link_options("-Wl,-alias,_strsm$NEWLAPACK,_strsm_")
endfunction()
